<div id="main">
  <article class="blogpost-overview"> 
    <h1> 
        All Blog Posts 
        <?php 
        if ($this->blog->search_tag){
            echo '( #' . $this->blog->search_tag . ' )';
        }
        ?>
    </h1>
    <ul class="blogpost-list">
        <?php
        $blog_posts_to_show = array();
        if ($this->blog->search_tag) {
            $blog_posts_to_show = $this->blog->get_posts_with_tag($this->blog->search_tag);
        }
        else {
            $blog_posts_to_show = $this->blog->all_blog_posts;
        }
        
        foreach(array_reverse($blog_posts_to_show) as $key => $blog_post) {
            ?>
            <li>
                <div class="blogpost-list-title">
                    <a href="blog.php?post_no=<?php echo count($this->all_blog_posts_names) - 1 - $count; ?>">
                        <?php echo $blog_post->title ?>
                    </a>
                </div>
                <div class="blogpost-list-meta">
                    <div class="blogpost-list-tags">
                        <ul class="blog-tags">
                            <?php 
                            foreach($blog_post->tags as $tag) {
                                ?>
                                <li class="muted-text hover-unmute">
                                    <a class="tag-link" href="blog.php?search_tag=<?php echo $tag; ?>"> <?php echo '#' . $tag; ?> </a>
                                </li>
                                <?php
                            }
                            ?>
                        </ul>
                    </div>
                    <div class="blogpost-list-date"> <?php echo $blog_post->date ?> </div>
                </div>
            </li>
            <?php
        }
        ?>
    </ul>
    <?php if ($this->blog->search_tag) {
        ?>
        <div> <a class="all-posts-link" href="blog.php?show_all_posts"> Show All Posts </a>
        <?php
    } ?>
  </article>
</div>